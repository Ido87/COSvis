# Helpers

```{r setup5, include=FALSE, purl=FALSE}
knitr::opts_chunk$set(eval = FALSE, tidy = FALSE)
```

This section collects small and helpful functions/scripts that are used
throughout **visCOS**.

None of the functions is exported!

## Code
The subsequent functions are defined below

function | exported
------------- | -------------
`get_regex_for_cos_data` | no
`get_basin_numbers` | no
`set_panel_size`| no

### Get a Regular Expression String for the needed columns
This function can be called to get the names of the 8 allowed column-names
within **visCOS**. `get_regex_for_cos_data` takes no input, as it gets the
information directly from the global options (see: *viscos_options section*).
```{r}
get_regex_for_cos_data <- function() 
  {
  regex_pattern <- paste("^",viscos_options("name_COSyear"),"$|",
                         "^",viscos_options("name_COSmonth"),"$|",
                         "^",viscos_options("name_COSday"),"$|",
                         "^",viscos_options("name_COShour"),"$|",
                         "^",viscos_options("name_COSmin"),"$|",
                         viscos_options("name_o"),".*|",
                         viscos_options("name_s"),".*|",
                         viscos_options("name_lb"),".*|",
                         viscos_options("name_ub"),".*|",
                         viscos_options("name_COSposix"),"|",
                         viscos_options("name_COSperiod"),
                         sep = "")
  return(regex_pattern)
}
```


### Extract the numeration of the basins
This function fetches the number of basins from the provided data.frame
(`cos_data`) by removing all the non-digits characters from the column names.
```{r}
get_basin_numbers <- function(cos_data) {
  require("magrittr", quietly = TRUE)
  assert_dataframe(cos_data)
  assert_junk(cos_data)
  #
  d_names <- names(cos_data)
  d_nums <- d_names  %>% gsub('\\D','',.) %>% unique
  d_nums <- d_nums[!(d_nums == "")] %>% as.integer
  return(d_nums)
}
```
