---
title: "Example 1: Intro to the *pour.* functions"
output:
  tufte::tufte_html: default
  tufte::tufte_handout: default
---
```{r, echo = FALSE, message=FALSE}
  require("visCOS")
  require("magrittr")
```

The `pour.` functions provide the raw ingredients or the base liqueurs  if you want so. They no input or very little and return examples or help with getting basic data. Right now there are 3 different functions available (`pour.runoff_example`, `pour.spinup` and `pour.plt_ctrl`) and a wrapper-function to access all of them in a more concise fashion.

### *pour.*runoff_example
We start with the `pour.runoff_example` function, which will provide us with a proto-typical example of runoff data. It is invoked without arguments and simple returns data:
```{r}
  example <- pour.runoff_example()
  head( example ) # get example runoff
```

The data is separated in different basins, where **qobs** marks an observation of a given basin and **qsim** a corresponding simulation given by a hydrological model of sorts. The first five columns are used to give information about the timesteps, i.e. dates, in a rather rudimentary way (see: xxx) and we do not know what **qosi** is meant to be.  

We can plot the data of basin to get a better feeling of the data at hand

```{r}
  plot(example$QOBS_0001,
       type = "l",
       col = "steelblue",
       ylab = "runoff",
       xlab = "time")
  lines(example$QSIM_0001,
        col = "palevioletred")
```



### *pour.*spinup
*Get the spinup from a text file*

The spinup defines a row which denotes the time-step at which our simulation can be used for further processing. Rows before the spinup need to be removed from the data set for the evaluation. Many models save the information about the spinup in a separate file. The function 'pour.spinup' provides a small wrapper to grab the spinup time dependent on some preceding pattern in a file.  
To test the function we can use `filepath = "dummy"`, which can take 3 different patterns, i.e. *a* *b* and *c* and returns different spinups.

```{r}
  spinup_a <- pour.spinup(filepath = "dummy",pattern = "a")
  spinup_b <- pour.spinup("dummy","b")
  spinup_c <- pour.spinup("dummy","c")
  # note: there is no "d"-pattern in the dummy variable
    c(spinup_a,spinup_b,spinup_c)
```

### *pour.*plt_ctrl
*set plot options*
```{r}
  pour.plt_ctrl()[[1]]
```

### puring as such
Finally there is also an overall wrapper for all these functions, which just uses the verb **pour** and takes the noun as an argument for the execution. There are applciations where this will lead to clearer coding. 
```{r}
    pour(runoff_example) %>% head()
    pour(plt_ctrl)[[1]]
    pour(spinup,"dummy","c")
```
