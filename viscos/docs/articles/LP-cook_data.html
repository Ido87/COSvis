<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cosdata • visCOS</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="cosdata">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">visCOS</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/LP-cook_data.html">cosdata</a>
    </li>
    <li>
      <a href="../articles/LP-flow_duration_curves.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-helpers.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-judge.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-judge_explore.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-judge_explore2.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-judge_window.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-peack.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-serve.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LP-time_aggregation.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/LT-useful.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>cosdata</h1>
                        <h4 class="author">Daniel Klotz</h4>
            
      
      
      <div class="hidden name"><code>LP-cook_data.Rmd</code></div>

    </div>

    
    
<p>For visCOS raw-data is data directly taken from COSERO. In general, raw-data can have many forms. The focus of visCOS are time series of observations, <span class="math inline">\(o\)</span>, and model simulations, <span class="math inline">\(s\)</span>. It assumes that the data is already loaded in to R.</p>
<p>R has many options to read data. Most file-formats can be accessed with the native <code>read.</code> functions (for an example enter <code>?read.table</code> in your R-terminal). However, for larger files we recommend the read functionality of the <code>data.table</code> package. In our tests it was fastest and most flexible choice. Lastly, we recommend <code>readr</code> package for well structured and large data.</p>
<p>After the data is read into R it needs to be transformed (<em>cooked</em>) into a rigidly defined format, which we call <strong>cosdata</strong>. Admittedly, the format has some redundancies, but this is compensated by the many options for operating on the data. Furthermore, it is a good “middle ground” between the output of COSERO and the formats used within the R ecosystem.</p>
<p>Note: All cosdata formatted data can be used for further exploratory analysis with visCOS.</p>
<p><strong>NOW WE NEED TO EXPLAIN COSDATA!</strong></p>
<p>Snipptes:</p>
<p>Currently visCOSonly allows to compare between <em>numbered catchments</em>! The data <strong>must</strong> include an integer number at the end of its name, e.g. <code>QObs_001</code> and <code>QSim_001</code>).</p>
<p>Additionally, <code>cosdata</code> data.frame needs to have two different definitions for the date of a given row (see: <a href="introduction.html">Introduction</a>). One is based on an old way to write dates out in fortran code. In that case each column represents a time-resolution. In concrete, the following columns are used:</p>
<ul>
<li>
<em>yyyy</em> - year,</li>
<li>
<em>mm</em> - month,</li>
<li>
<em>hh</em> - hour,</li>
<li>
<em>min</em> - minute.</li>
</ul>
<p>The other format is a more modern way to define time information. That is, the <code>POSIXct</code> format (see: <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/as.POSIXlt.html">link</a>). This format is a standard for <code>R</code> and has many usages (e.g. transforming your data frame into a time series).</p>
<p>visCOS can differentiate seasonal information on a monthly resolution. The in- and out-of-period markings are stored in a separate column (defined by <code><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_options">viscos_options("name_COSperiod")</a></code>). Here, each season is defined by an number (integer), which starts 1 and is raised for each new season. A 0 indicates the out-of-period rows.</p>
<p>If needed, the column-names of the cosdata can adapted by using the <code>viscos_options</code> function from <code>coscos</code> (alternatively one might prefer to set the column-name the <code>data.frame</code> accordingly). Calling the function <code><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_options">viscos_options()</a></code> will return a list with the available options. The available options are as following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">   <span class="co"># showing the options:</span>
   <span class="kw">library</span>(coscos)
   <span class="kw">library</span>(magrittr)
   <span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_options">viscos_options</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unlist</span>(.)</code></pre></div>
<pre><code>##         name_o         name_s        name_lb        name_ub   name_COSyear 
##         "qobs"         "qsim"           "lb"           "ub"         "yyyy" 
##  name_COSmonth    name_COSday   name_COShour    name_COSmin  name_COSposix 
##           "mm"           "dd"           "hh"          "min"    "posixdate" 
## name_COSperiod      data_unit   missing_data        color_o        color_s 
##       "period"      "(m^3/s)"         "-999"   "dodgerblue"       "orange" 
##     of_limits1     of_limits2 
##            "0"            "1"</code></pre>
<p>An option can be changed by providing the new option-value as functional argument of the option. Here is an example for changing the <span class="math inline">\(o\)</span> column color:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">   <span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_options">viscos_options</a></span>(<span class="dt">color_o =</span> <span class="st">"dodgerblue"</span>)
   <span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_options">viscos_options</a></span>( ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unlist</span>(.)</code></pre></div>
<pre><code>##         name_o         name_s        name_lb        name_ub   name_COSyear 
##         "qobs"         "qsim"           "lb"           "ub"         "yyyy" 
##  name_COSmonth    name_COSday   name_COShour    name_COSmin  name_COSposix 
##           "mm"           "dd"           "hh"          "min"    "posixdate" 
## name_COSperiod      data_unit   missing_data        color_o        color_s 
##       "period"      "(m^3/s)"         "-999"   "dodgerblue"       "orange" 
##     of_limits1     of_limits2 
##            "0"            "1"</code></pre>
<p>The <code>coscos</code> package also provides a function to get some exemplary data to use in visCOS. Throughout this guide we will use it to demonstrate the different functionalities of visCOS. The data can be loaded with the function <code>viscos_example</code>, e.g.:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">options</span>(<span class="dt">width=</span><span class="dv">80</span>)
  <span class="kw">require</span>(coscos)
  <span class="co">#</span>
  raw_data_example &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_example">viscos_example</a></span>( )
  <span class="kw">head</span>(raw_data_example)</code></pre></div>
<pre><code>##   yyyy mm dd hh min QOBS_0001 QOSI_0001 QSIM_0001 QOBS_0002 QOSI_0002 QSIM_0002
## 1 2007  1  1  0   0      2.98      3.48      3.48      2.56      3.11      3.11
## 2 2007  1  1  1   0      2.89      3.48      3.48      2.56      3.11      3.11
## 3 2007  1  1  2   0      2.64      3.48      3.48      2.57      3.11      3.11
## 4 2007  1  1  3   0      2.51      3.48      3.48      2.57      3.11      3.11
## 5 2007  1  1  4   0      2.42      3.48      3.48      2.57      3.11      3.11
## 6 2007  1  1  5   0      2.34      3.49      3.49      2.57      3.11      3.11</code></pre>
<p>One can see that the example data still has some columns that are not needed for further analysis, i.e. the columns <code>QOSI_0001</code> and <code>QOSI_0002</code>. Furthermore, the <code>posixdate</code> and the <code>period</code> columns are still missing in the data. Again, the <code>coscos</code> provides a streamlined function, called <code>cook_cosdata</code> to get rid of the non-needed columns, complete the date columns and add the <code>period</code> column with pre-specified settings. With the raw-data example from before, the finished cosdata might then look as following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  raw_data_example <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/cook_cosdata">cook_cosdata</a></span>(.) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">head</span>(.)</code></pre></div>
<pre><code>## # A tibble: 6 x 11
##    yyyy    mm    dd    hh   min QOBS_0001 QSIM_0001 QOBS_0002 QSIM_0002
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1  2007     1     1     0     0      2.98      3.48      2.56      3.11
## 2  2007     1     1     1     0      2.89      3.48      2.56      3.11
## 3  2007     1     1     2     0      2.64      3.48      2.57      3.11
## 4  2007     1     1     3     0      2.51      3.48      2.57      3.11
## 5  2007     1     1     4     0      2.42      3.48      2.57      3.11
## 6  2007     1     1     5     0      2.34      3.49      2.57      3.11
## # ... with 2 more variables: posixdate &lt;dttm&gt;, period &lt;int&gt;</code></pre>
<p>The <code>cook_cosdata</code> function can be very useful. If you are not sure that your data has the right format yet, just try to use <code>cook_cosdata</code> on it. The function is used at the start of almost all visCOS functions. Thus, it is very likely that your data is fine if <code>cook_cosdata</code> works on it.</p>
<div id="examples-plots-from-cosdata" class="section level2">
<h2 class="hasAnchor">
<a href="#examples-plots-from-cosdata" class="anchor"></a>Examples plots from cosdata</h2>
<p>It is already possible to do a lot with just the cosdata. In the following are some examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">library</span>(ggplot2)
  raw_data_example <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/cook_cosdata">cook_cosdata</a></span>(.) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(.) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> posixdate, <span class="dt">y =</span> QOBS_<span class="dv">0002</span>),
                <span class="dt">color =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_options">viscos_options</a></span>(<span class="st">"color_o"</span>)) <span class="op">+</span>
<span class="st">       </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> posixdate, <span class="dt">y =</span> QSIM_<span class="dv">0002</span>),
                <span class="dt">color =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/viscos_options">viscos_options</a></span>(<span class="st">"color_s"</span>))   </code></pre></div>
<p><img src="LP-cook_data_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">library</span>(ggplot2)
  raw_data_example <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/coscos/topics/cook_cosdata">cook_cosdata</a></span>(.) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(.) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> QOBS_<span class="dv">0001</span>, <span class="dt">y =</span> QOBS_<span class="dv">0002</span>))  </code></pre></div>
<p><img src="LP-cook_data_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#examples-plots-from-cosdata">Examples plots from cosdata</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Daniel Klotz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
